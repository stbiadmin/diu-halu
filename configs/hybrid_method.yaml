# Hybrid Method Configuration Example
# Combines DoDHaluEval and HaluEval methodologies

version: "0.1.0"
environment: "development"

# Basic dataset configuration
dataset:
  path: "data/CSC"
  file_pattern: "*.pdf"
  max_files: 2
  max_pages_per_file: 5

# Response Generation Configuration - Hybrid Method
response_generation:
  # Use hybrid methodology
  generation_method: "hybrid"
  
  providers: ["openai", "fireworks"]
  models:
    openai: "gpt-4"
    fireworks: "accounts/fireworks/models/llama-v3p1-70b-instruct"
  timeout: 30
  max_concurrent: 5
  hallucination_rate: 0.3
  
  # DoDHaluEval settings (for primary method)
  dodhalueval_settings:
    hallucination_rate: 0.3
    injection_strategies: ["factual", "logical", "context"]
    system_prompt_strategy: "hallucination_prone"
    post_processing_injection: true
    
  # HaluEval settings (for fallback method)
  halueval_settings:
    use_two_stage_generation: true
    enable_filtering: true
    hallucination_patterns:
      - "factual_contradiction"
      - "context_misunderstanding"
      - "specificity_mismatch"
      - "invalid_inference"
    template_file: "data/prompts/halueval_templates.yaml"
    max_knowledge_length: 500
    
  # Hybrid-specific settings
  hybrid_settings:
    primary_method: "dodhalueval"      # Try DoDHaluEval first
    fallback_method: "halueval"        # Fall back to HaluEval if needed
    comparison_mode: false             # Set to true to generate with both methods and compare
    selection_criteria: "confidence_score"  # How to select best response in comparison mode

# Prompt Generation
prompt_generation:
  methods: ["llm"]
  num_prompts: 20
  llm_provider: "openai"
  perturbation_enabled: true
  validation_enabled: true
  strategies: ["factual", "logical", "context"]

# Hallucination Detection
hallucination_detection:
  methods: ["hhem", "g_eval", "selfcheck"]
  ensemble: true
  max_concurrent: 2
  timeout: 60
  providers:
    g_eval: "openai"
    selfcheck: "openai"

# Processing Configuration
processing:
  batch_size: 10
  bypass_cache: false
  bypass_cache_steps:
    pdf_extraction: false
    document_chunking: false
    prompt_generation: true
    response_generation: true
    hallucination_detection: true
  show_progress: true
  verbose: false

# Output Configuration
output:
  directory: "output/hybrid_results"
  format: "halueval"
  generate_report: true
  save_intermediate: true